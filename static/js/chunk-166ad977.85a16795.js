(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-166ad977"],{"086d":function(t,e,i){t.exports=i.p+"static/img/original.1d2ca11e.png"},1827:function(t,e,i){"use strict";i.r(e),i("09ee"),i("3a20");var n=i("b54b"),s=i("08c1"),a=i("26a1"),o=i("f756"),l={components:{toolBar:function(){return i.e("chunk-81f0cf9c").then(i.bind(null,"bf90"))},boxItem:function(){return i.e("chunk-6456c4ef").then(i.bind(null,"88d2"))},baseWidthSelector:function(){return i.e("chunk-2d0e6c3a").then(i.bind(null,"99ae"))}},computed:Object(n.a)({},Object(s.c)(["baseWidth","boxList"]),{boxActiveID:{get:function(){return this.$store.getters.boxActiveID},set:function(t){return this.SET_BOX_ACTIVE_ID(t)}}}),data:function(){return{dialogVisible:!1,insertedID:"NULL",imgToggle:!0,templateID:""}},watch:{boxActiveID:function(t){this.SCROLL_TO_BOXID(t)},dialogVisible:function(t){t&&this.previewSubmit()}},created:function(){var t=this;if(this.templateID=this.$route.query.templateID,this.templateID){var e=this.$loading({text:"加载模板中",target:".main-content",background:"rgba(0, 0, 0, .3)"});Object(o.b)(this.templateID).then((function(e){var i=e.data,n=i.code,s=i.data;200==n&&(t.$store.state.imgList=s.imgList,t.$store.state.box=s.box,t.$store.commit("SET_CUR_TEMPLATE_ID",t.templateID))})).catch((function(e){t.$message.error(e.message)})).finally((function(t){setTimeout((function(){e.close()}),500)}))}},mounted:function(){this.menu=Object(a.b)("#menuExtend",this.$refs.menuAppend)},methods:Object(n.a)({},Object(s.d)(["SET_BOX_ACTIVE_ID","SET_MAP_ACTIVE_ID","SET_LUNBO_ACTIVE_ID"]),{},Object(s.b)(["ADD_BOXLIST_ITEM","SCROLL_TO_TOP","SCROLL_TO_BOXID","EMPTY_BOXLIST_TYPE","TOGGLE_BOX_IMAGE"]),{activateBox:function(t){this.boxActiveID=t.id,this.SET_MAP_ACTIVE_ID(-1)},focus_box_item:function(t){var e=t.dragID,i=t.bool,n=this.$refs.boxItem.find((function(t){return t.boxID==e}));n&&n.$el&&setTimeout((function(){n.$el.classList[i?"add":"remove"]("isBoxMoving")}),i?0:400)},beforeSubmit:function(){if(0==this.boxList.length)return this.$message.info("没有数据, 不允许上传");this.dialogVisible=!0},previewSubmit:function(){var t=this,e=this.$store.state.box.boxList;Object(o.d)(e).then((function(e){t.$message("数据提交成功"),200==e.data.code&&(t.insertedID=e.data.insertedID)})).catch((function(t){return t}))},saveNewTemplate:function(){var t=this;this.$prompt("请输入模板标题").then((function(e){var i=e.value;Object(o.e)({data:t.$store.state,title:i}).then((function(t){}))})).catch((function(){}))},updateTemplate:function(){var t=this;Object(o.g)(this.templateID,this.$store.state).then((function(e){200==e.data.code&&t.$message("保存成功")}))}})},c=(i("9864"),i("d779"),i("623f")),r=Object(c.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wh100"},[n("div",{ref:"menuAppend"},[n("el-button",{attrs:{size:"mini",type:"success"},on:{click:t.beforeSubmit}},[t._v("预览")]),n("el-button",{attrs:{size:"mini"},on:{click:t.saveNewTemplate}},[t._v("保存模板")]),t.templateID?n("el-button",{attrs:{size:"mini"},on:{click:t.updateTemplate}},[t._v("更新模板")]):t._e(),n("el-dialog",{attrs:{title:"预览ID:"+t.insertedID,top:"20px",visible:t.dialogVisible,width:"50%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[n("el-row",{attrs:{justify:"center",type:"flex"}},[n("iframe",{attrs:{src:"http://192.168.36.119:3000/preview?insertedID="+t.insertedID,frameborder:"0"}})]),n("hr"),n("el-row",[n("el-col",{attrs:{span:12,align:"center"}},[t._v(" 二维码预览 "),n("qrcode",{attrs:{value:"http://192.168.36.119:3000/preview?insertedID="+t.insertedID}})],1),n("el-col",{attrs:{span:12,align:"center"}},[t._v(" 网址预览 "),n("br"),n("a",{attrs:{target:"_blank",href:"http://192.168.36.119:3000/preview?insertedID="+t.insertedID}},[n("el-button",[t._v("网址预览")])],1),n("br")])],1)],1)],1),n("split-pane",{staticClass:"wh100",attrs:{"min-percent":5,"default-percent":70,split:"vertical"}},[n("div",{staticClass:"wh100",attrs:{slot:"paneL",id:"leftContainer"},slot:"paneL"},[n("div",{attrs:{id:"previewPanel",onselectstart:"return false;"}},[n("div",{staticClass:"topPannel"},[n("div",{staticClass:"leftpanelControlBtn flex-center",on:{click:function(e){return t.ADD_BOXLIST_ITEM({moveToNewBox:!1})}}},[n("i",{staticClass:"el-icon-plus"}),n("small",[t._v("新增版块")])]),t.boxList.length?n("div",{staticClass:"leftpanelControlBtn flex-center",on:{click:t.EMPTY_BOXLIST_TYPE}},[n("i",{staticClass:"el-icon-delete"}),n("small",[t._v("清空板块")])]):t._e(),t.boxList.length?n("div",{staticClass:"leftpanelControlBtn flex-center",on:{click:function(e){return t.TOGGLE_BOX_IMAGE(t.imgToggle=!t.imgToggle)}}},[n("i",{staticClass:"el-icon-view"}),n("small",[t._v("隐藏背景")])]):t._e(),n("div",{staticClass:"leftpanelControlBtn flex-center",on:{click:function(e){return t.TOGGLE_BOX_IMAGE(t.imgToggle=!t.imgToggle)}}},[n("baseWidthSelector",{scopedSlots:t._u([{key:"default",fn:function(e){return[n("div",{staticClass:"flex-center",staticStyle:{"flex-direction":"column"}},[n("i",{staticClass:"el-icon-view"}),n("small",[t._v(t._s(e.baseWidth)+"px")])])]}}])})],1)]),n("div",{staticClass:"bottomPannel"},[n("div",{staticClass:"leftpanelControlBtn flex-center",on:{click:t.SCROLL_TO_TOP}},[n("i",{staticClass:"el-icon-top"}),n("small",[t._v("返回顶部")])])])]),n("div",{staticClass:"wh100",attrs:{id:"itemPanel"}},[t.boxList.length?n("el-scrollbar",{attrs:{id:"main",noScrollX:""},nativeOn:{click:function(e){return e.stopPropagation(),t.activateBox(-1)}}},[n("transition-group",{attrs:{name:"flip-list",id:"boxList",tag:"ul"}},t._l(t.boxList,(function(e){return n("boxItem",t._b({key:e.id,ref:"boxItem",refInFor:!0,class:{activeBox:t.boxActiveID==e.id},attrs:{boxID:e.id,boxData:e,boxType:e.type},nativeOn:{click:function(i){return i.stopPropagation(),t.activateBox(e)}}},"boxItem",{"data-boxid":e.id},!1))})),1),n("div",{staticClass:"item addOne",style:{width:t.baseWidth+"px"}},[n("div",{staticClass:"addOne-wrapper",on:{click:function(e){return e.stopPropagation(),t.ADD_BOXLIST_ITEM(e)}}},[n("i",{staticClass:"el-icon-plus"}),n("label",[t._v("点击添加一个新的板块")])])])],1):n("div",{staticClass:"noItemTip"},[n("img",{attrs:{src:i("086d"),width:"300",alt:""}}),n("el-button",{attrs:{round:"",type:"primary"},on:{click:t.ADD_BOXLIST_ITEM}},[t._v("添加板块")])],1)],1)]),n("keep-alive",{attrs:{slot:"paneR"},slot:"paneR"},[n("toolBar",{ref:"toolBar",attrs:{id:"toolBar"},on:{focus_box_item:t.focus_box_item,changeItemOrder:t.SCROLL_TO_BOXID}})],1)],1)],1)}),[],!1,null,"ff306b28",null);e.default=r.exports},"3b99":function(t,e,i){},"762b":function(t,e,i){},9864:function(t,e,i){"use strict";var n=i("3b99");i.n(n).a},d779:function(t,e,i){"use strict";var n=i("762b");i.n(n).a}}]);